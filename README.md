- フロントエンドリポジトリは[こちら](https://github.com/y4tk8/yumkeeper_frontend)です  
- ドキュメントリポジトリは[こちら](https://github.com/y4tk8/yumkeeper_docs)です

# Yum Keeper - 動画特化の料理レシピ保存サービス
![トップ画像](https://raw.githubusercontent.com/y4tk8/yumkeeper_frontend/main/public/images/top-image.png)

### ▼ サービスURL
https://www.yumkeeper.net

本登録いただく場合は認証メールが迷惑メールフォルダに振り分けられることがあります。  
メールが届かない際はそちらもご確認ください。

デモ動画は[こちら](https://www.youtube.com/watch?v=NUO7qT2l7wA)から視聴できます

### ▼ Qiita記事
[【微経験】独学で動画特化の料理レシピ保存サービスを開発するまで【Rails / TypeScript / Next.js / AWS / Docker / GitHub Actions】](https://qiita.com/y4tk8/items/e5bef391e38db7f790c5)

インプットから開発、リリースまでの経緯や苦労したポイントなどを上記にまとめております

### ▼ 開発者Xアカウント
[ちゃんよ(@y4tk8)](https://x.com/y4tk8)

何かありましたらご連絡いただけますと幸いです

---

### サービス概要
**Yum Keeper**は、YouTube動画と共に料理レシピをシンプルに管理・保存できるサービスです。  
「料理レシピは活字より動画派」という方がターゲットです。

### 開発動機
私は普段から動画（特にYouTube）で料理レシピを探します。  
ただ、作り方を覚えても料理のたびに具材や調味料、分量などを動画再生して確認するのが煩雑でした。  
そこで、YouTube動画と一緒にレシピ管理できるサービスがほしいと思い、開発に至りました。

### 機能一覧
#### 1. ユーザーアカウント関連
- サインアップ
- サインイン
- サインアウト
- アカウント有効化
- パスワードリセット
- パスワード変更
- アカウント認証メール再送
- 退会
- ゲストサインイン

#### 2. レシピ関連
- レシピ追加
- レシピ詳細
- レシピ編集
- レシピ更新
- レシピ削除
- レシピ一覧
- レシピ並び替え
  - 最新の更新順、追加日（新しい順）、追加日（古い順）
- YouTube動画取得（_YouTube Data API_）
- YouTube動画埋め込み

#### 3. その他
- ページネーション（_Pagy_）
- 認可
  - 未認証ユーザーのアクセス制御
  - 他ユーザー保有レシピへのアクセス制御
- バリデーション & エラーメッセージ表示
  - 空文字、長さ、フォーマットなど
  - YouTube Data APIから動画取得時、レスポンスに応じたバリデーション
- フラッシュ
  - ユーザー操作に応じて成功 / 失敗の各種メッセージ
- モーダル
- 404エラー
- 500エラー

### 使用技術一覧
- バックエンド
  - 言語: Ruby 3.3.7 / Ruby on Rails 7.2.2.1
  - テスト・開発支援: RSpec / RuboCop
- フロントエンド
  - 言語: TypeScript 5.8.2 / React 19.0.0 / Next.js 15.1.6
  - テスト・開発支援: Vitest / React Testing Library / MSW / Cypress / ESLint / Prettier
  - デザイン: Tailwind CSS / Shadcn UI
- インフラ: AWS(Route53 / ALB / ECS Fargate / ECR / RDS PostgreSQL / ACM / CloudWatch etc.) / Nginx / Vercel
- CI/CD: GitHub Actions
- 環境構築: Docker / Docker Compose / Dev Containers
- 外部API: YouTube Data API

### 開発における工夫ポイント
1. **APIリクエスト時のトークン自動付与とContextによるユーザー情報管理**
  - 認証ロジックは _Devise Token Auth_ を採用  
    Railsへのリクエスト時にトークンが自動付与されるようカスタムフックで共通化済みです
  - ページリロード時にトークンが消失しないよう、Context + ローカルストレージで管理しています
2. **ユーザーが入力した<u>分量</u>を適切にパースして保存**
  - 「空文字」「数値のみ」「文字列のみ」「数値 + 文字列」などあらゆるパターンの入力値を適切にパース  
    全角入力にも対応済み
  - 分量を <u>数値</u> と <u>単位</u> に分けてデータベースに保存  
    拡張案として**分量自動計算**を検討しているので、数値のみ倍化 or 縮小に対応できるよう設計済み
3. **YouTube Data APIからのあらゆるレスポンスを想定したバリデーション**
  - 動画の「公開状況」「埋め込み可否」「削除済みか」など各パターンを想定してバリデーションを追加しています
  - MSWでレスポンスをモック化の上、単体テストも実施済み

### テスト戦略
- バックエンド:
  - 主に ユーザー認証 & レシピ機能 について正常系・異常系どちらも網羅的にテスト済み
  - FactoryBotでテストデータ生成の上、可読性とDRYのバランスを意識して記述
  - カバレッジは **83.05%**
- フロントエンド
  - トークン管理、材料・調味料のmap処理、頻繁に使う汎用コンポーネントなど根幹機能を優先してテスト
  - CypressによるシナリオベースのE2Eテスト
  - 期限重視のためカバレッジは高くないですが、非カバー部分は手動ブラウザテストを徹底

### 関連ドキュメント
以下は[ドキュメントリポジトリ](https://github.com/y4tk8/yumkeeper_docs)に格納しています。そちらをご参照ください。
- サービス概要書
- 機能一覧表
- ER図
- テーブル定義書
- インフラ構成図
